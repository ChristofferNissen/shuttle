plan: 'git://git@bitbucket.org:LunarWay/lw-shuttle-go-plan.git'

vars:
  service: travelcard
  squad: apollo
  k8s:

  - name: DBHOST
      valueFrom:
        configMapKeyRef:
          name: database
          key: db.host
        - name: DBDATABASE
          valueFrom:
            configMapKeyRef:
              name: $service-db
              key: db.database
        - name: DBSCHEMA
          valueFrom:
            configMapKeyRef:
              name: $service-db
              key: db.schema
        - name: DBUSER
          valueFrom:
            configMapKeyRef:
              name: $service-db
              key: db.user
        - name: DBPASSWORD
          valueFrom:
            secretKeyRef:
              name: $service-db
              key: db.password
        - name: LEGACY_DBHOST
          valueFrom:
            configMapKeyRef:
              name: database
              key: db.host
        - name: LEGACY_DBUSER
          valueFrom:
            configMapKeyRef:
              name: legacy-db
              key: db.user
        - name: LEGACY_DBDATABASE
          valueFrom:
            configMapKeyRef:
              name: legacy-db
              key: db.database
        - name: LEGACY_DBSCHEMA
          valueFrom:
            configMapKeyRef:
              name: legacy-db
              key: db.schema
        - name: LEGACY_DBPASSWORD
          valueFrom:
            secretKeyRef:
              name: legacy-db
              key: db.password
        - name: RABBITMQ_HOST
          valueFrom:
            configMapKeyRef:
              name: rabbitmq
              key: rabbitmq.host
        - name: RABBITMQ_USER
          valueFrom:
            configMapKeyRef:
              name: rabbitmq
              key: rabbitmq.user
        - name: RABBITMQ_PASSWORD
          valueFrom:
            secretKeyRef:
              name: rabbitmq
              key: rabbitmq.password
        - name: RABBITMQ_VHOST
          valueFrom:
            configMapKeyRef:
              name: rabbitmq
              key: rabbitmq.vhost
        - name: RABBITMQ_PREFIX
          valueFrom:
            configMapKeyRef:
              name: rabbitmq
              key: rabbitmq.prefix
        - name: LOG_CONSOLE_AS_JSON
          valueFrom:
            configMapKeyRef:
              name: $service
              key: log.console.as.json
        - name: LOG_CONSOLE_ONLY
          valueFrom:
            configMapKeyRef:
              name: $service
              key: log.console.only
        - name: LOG_CONSOLE_LEVEL
          valueFrom:
            configMapKeyRef:
              name: $service
              key: log.console.level
        - name: CURRENCY_CLOUD_ENVIRONMENT
          valueFrom:
            configMapKeyRef:
              name: $service
              key: currency.cloud.environment
        - name: CURRENCY_CLOUD_LOGIN_ID
          valueFrom:
            configMapKeyRef:
              name: $service
              key: currency.cloud.login.id
        - name: CURRENCY_CLOUD_API_KEY
          valueFrom:
            secretKeyRef:
              name: $service
              key: currency.cloud.api.key
        - name: S3_REGION
          valueFrom:
            configMapKeyRef:
              name: s3-private
              key: s3.region
        - name: S3_PUBLIC_BUCKET
          valueFrom:
            configMapKeyRef:
              name: s3-public
              key: s3.public.bucket
        - name: GPS_WSDL_FILE
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.wsdl.file
        - name: GPS_USERNAME
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.username
        - name: GPS_PASSWORD
          valueFrom:
            secretKeyRef:
              name: $service
              key: gps.password
        - name: GPS_ISS_CODE
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.iss.code
        - name: GPS_CARD_DESIGN
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.card.design
        - name: GPS_CREATE_TYPE
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.create.type
        - name: GPS_CREATE_IMAGE
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.create.image
        - name: GPS_LIMITS_GROUP
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.limits.group
        - name: GPS_PERMS_GROUP
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.perms.group
        - name: GPS_BASE_CURRENCY
          valueFrom:
            configMapKeyRef:
              name: $service
              key: gps.base.currency
        - name: EHI_SERVICE_HOST
          valueFrom:
            configMapKeyRef:
              name: $service
              key: ehi.service.host
        - name: CDN_BASE_URL
          valueFrom:
            configMapKeyRef:
              name: $service
              key: cdn.base.url